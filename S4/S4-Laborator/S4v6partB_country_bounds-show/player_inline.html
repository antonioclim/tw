<!DOCTYPE html>
<html lang="ro"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prezentare animată — S4v6partB_country_bounds.js</title>
<style>
:root { --bg:#0b1021; --fg:#ffffff; --acc:#8ab4f8; --mut:#a0a8c0; --tok:rgba(255,205,86,.35); --tokb:rgba(255,205,86,.6);
        --notesW: 560px; --splitW: 6px; }
html,body { height:100%; margin:0; background:var(--bg); color:var(--fg); font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; }
.wrap { display:grid; grid-template-rows:auto 1fr auto; height:100%; grid-template-columns: 1fr var(--splitW) var(--notesW); position:relative; }
header,footer { grid-column: 1 / span 3; padding:.6rem 1rem; background:rgba(255,255,255,0.04); }
#meta { font-size:.9rem; color:var(--mut); }
#codebox { padding:1rem; overflow:auto; white-space:pre; tab-size:2; line-height:1.35; font-size:15px; }
#splitter { cursor:col-resize; background:rgba(255,255,255,0.06); } #splitter:hover { background:rgba(255,255,255,0.15); }
#notes { padding:1rem; border-left:1px solid rgba(255,255,255,0.08); overflow:auto; font-size:13px; background:rgba(255,255,255,0.02); }
.controls { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
button, input[type=range], select { accent-color:var(--acc); }
.stepTitle { color:var(--acc); font-weight:600; } .rationale { color:var(--mut); font-size:.95rem; }
.bar { width:100%; height:4px; background:rgba(255,255,255,.1); position:relative; margin-top:.5rem; } .prog { position:absolute; left:0; top:0; bottom:0; width:0%; background:var(--acc); }
.line { display:block; } .dim { opacity:.35; } .tok { color:#ffd54f; background:var(--tok); outline:1px solid var(--tokb); }
.noteTitle { font-weight:700; margin:.4rem 0 .2rem 0; } .small { font-size:12px; color:var(--mut); }
.box { border:1px solid rgba(255,255,255,.08); padding:.5rem; border-radius:6px; background:rgba(255,255,255,.03); margin-bottom:.6rem; }
.box .hdr { display:flex; gap:.6rem; align-items:center; margin-bottom:.4rem; }
kbd { font-family:inherit; background:rgba(255,255,255,.06); padding:.1rem .3rem; border-radius:4px; }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Prezentare animată — S4v6partB_country_bounds.js</h1>
    <div id="meta"></div>
  </header>

  <main id="codebox"></main>
  <div id="splitter" title="Trage pentru a redimensiona panoul de notițe"></div>
  <aside id="notes">
    <div class="box">
      <div class="hdr small">
        <div class="noteTitle">Notițe BLOC</div>
        <span id="keyBlock" class="small"></span>
        <span style="flex:1"></span>
        Sursă: <label><input type="radio" name="srcBlock" id="srcBlockAuto" checked> Auto</label>
               <label><input type="radio" name="srcBlock" id="srcBlockLLM"> LLM</label>
        <label style="margin-left:.8rem"><input type="checkbox" id="lockAll"> Blochează</label>
        <label style="margin-left:.8rem">Hold: <input id="hold" type="range" min="0" max="3" step="0.1" value="1.0"> <span id="holdV">1.0s</span></label>
        <label style="margin-left:.8rem"><input type="checkbox" id="asciiFallback"> ASCII fallback</label>
      </div>
      <div id="noteBlock" style="white-space:pre-wrap"></div>
    </div>

    <div class="box">
      <div class="hdr small">
        <div class="noteTitle">Notițe ETAPĂ</div>
        <span id="keyMicro" class="small"></span>
        <span style="flex:1"></span>
        Sursă: <label><input type="radio" name="srcMicro" id="srcMicroAuto" checked> Auto</label>
               <label><input type="radio" name="srcMicro" id="srcMicroLLM"> LLM</label>
      </div>
      <div id="noteMicro" style="white-space:pre-wrap"></div>
    </div>
  </aside>

  <footer>
    <div class="controls">
      <button id="btnPlay">▶︎ Play</button>
      <button id="btnPrev">⟨ Pas</button>
      <button id="btnNext">Pas ⟩</button>
      Mod: <select id="gran"><option value="token" selected>token</option><option value="char">caracter</option></select>
      Viteză: <input id="speed" type="range" min="0.01" max="5" step="0.01" value="0.02"/> <span id="speedv">0.02 tps</span>
      <label style="margin-left:1rem"><input type="checkbox" id="toggleDim" checked/> Dim context</label>
    </div>
    <div class="bar"><div class="prog" id="prog"></div></div>
    <div class="stepTitle" id="title"></div>
    <div class="rationale" id="rat"></div>
  </footer>
</div>

<!-- Payload Base64 pe UTF‑8: păstrează diacriticele -->
<script id="payload_b64" type="text/plain">eyJmcmFtZXMiOiBbIiIsICJcbiIsICJcbiIsICJcblxuIiwgIlxuXG5cbiIsICJcblxuXG5cbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG5cblxuIiwgIlxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cblxuXG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cblxuIiwgIlxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcblxuIiwgIlxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiAgY29uc3Qgb2JqZWN0ID0gYXdhaXQgZ2V0T2JqZWN0RnJvbVVybChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2NvdW50cnk9JHtjb3VudHJ5fSZmb3JtYXQ9anNvbmApO1xuXG4gIHJldHVybiB7XG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICBjb25zdCBvYmplY3QgPSBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Y291bnRyeT0ke2NvdW50cnl9JmZvcm1hdD1qc29uYCk7XG5cbiAgcmV0dXJuIHtcblxuIiwgIlxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiAgY29uc3Qgb2JqZWN0ID0gYXdhaXQgZ2V0T2JqZWN0RnJvbVVybChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2NvdW50cnk9JHtjb3VudHJ5fSZmb3JtYXQ9anNvbmApO1xuXG4gIHJldHVybiB7XG5cbiAgICBtaW5MYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzBdLFxuIiwgIlxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiAgY29uc3Qgb2JqZWN0ID0gYXdhaXQgZ2V0T2JqZWN0RnJvbVVybChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2NvdW50cnk9JHtjb3VudHJ5fSZmb3JtYXQ9anNvbmApO1xuXG4gIHJldHVybiB7XG5cbiAgICBtaW5MYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzBdLFxuICAgIG1heExhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMV0sXG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICBjb25zdCBvYmplY3QgPSBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Y291bnRyeT0ke2NvdW50cnl9JmZvcm1hdD1qc29uYCk7XG5cbiAgcmV0dXJuIHtcblxuICAgIG1pbkxhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMF0sXG4gICAgbWF4TGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsxXSxcbiAgICBtaW5Mb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsyXSxcbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcblxuICByZXR1cm4ge1xuXG4gICAgbWluTGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFswXSxcbiAgICBtYXhMYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzFdLFxuICAgIG1pbkxvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzJdLFxuICAgIG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdXG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICBjb25zdCBvYmplY3QgPSBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Y291bnRyeT0ke2NvdW50cnl9JmZvcm1hdD1qc29uYCk7XG5cbiAgcmV0dXJuIHtcblxuICAgIG1pbkxhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMF0sXG4gICAgbWF4TGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsxXSxcbiAgICBtaW5Mb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsyXSxcbiAgICBtYXhMb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFszXVxuXG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICBjb25zdCBvYmplY3QgPSBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Y291bnRyeT0ke2NvdW50cnl9JmZvcm1hdD1qc29uYCk7XG5cbiAgcmV0dXJuIHtcblxuICAgIG1pbkxhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMF0sXG4gICAgbWF4TGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsxXSxcbiAgICBtaW5Mb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsyXSxcbiAgICBtYXhMb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFszXVxuXG4gIH1cbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcblxuICByZXR1cm4ge1xuXG4gICAgbWluTGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFswXSxcbiAgICBtYXhMYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzFdLFxuICAgIG1pbkxvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzJdLFxuICAgIG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdXG5cbiAgfVxuXG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICBjb25zdCBvYmplY3QgPSBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Y291bnRyeT0ke2NvdW50cnl9JmZvcm1hdD1qc29uYCk7XG5cbiAgcmV0dXJuIHtcblxuICAgIG1pbkxhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMF0sXG4gICAgbWF4TGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsxXSxcbiAgICBtaW5Mb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsyXSxcbiAgICBtYXhMb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFszXVxuXG4gIH1cblxuZnVuY3Rpb24gbWFpbigpIHtcbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcblxuICByZXR1cm4ge1xuXG4gICAgbWluTGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFswXSxcbiAgICBtYXhMYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzFdLFxuICAgIG1pbkxvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzJdLFxuICAgIG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdXG5cbiAgfVxuXG5mdW5jdGlvbiBtYWluKCkge1xuXG4iLCAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICBjb25zdCBvYmplY3QgPSBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Y291bnRyeT0ke2NvdW50cnl9JmZvcm1hdD1qc29uYCk7XG5cbiAgcmV0dXJuIHtcblxuICAgIG1pbkxhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMF0sXG4gICAgbWF4TGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsxXSxcbiAgICBtaW5Mb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsyXSxcbiAgICBtYXhMb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFszXVxuXG4gIH1cblxuZnVuY3Rpb24gbWFpbigpIHtcblxuICBnZXRDb3VudHJ5Qm91bmRzKCdSb21hbmlhJylcbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcblxuICByZXR1cm4ge1xuXG4gICAgbWluTGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFswXSxcbiAgICBtYXhMYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzFdLFxuICAgIG1pbkxvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzJdLFxuICAgIG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdXG5cbiAgfVxuXG5mdW5jdGlvbiBtYWluKCkge1xuXG4gIGdldENvdW50cnlCb3VuZHMoJ1JvbWFuaWEnKVxuICAgIC50aGVuKGJvdW5kcyA9PiBjb25zb2xlLmxvZyhib3VuZHMpKTtcbiIsICJcbmNvbnN0IGZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpO1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gIGNvbnN0IG9iamVjdCA9IGF3YWl0IGdldE9iamVjdEZyb21VcmwoYGh0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD9jb3VudHJ5PSR7Y291bnRyeX0mZm9ybWF0PWpzb25gKTtcblxuICByZXR1cm4ge1xuXG4gICAgbWluTGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFswXSxcbiAgICBtYXhMYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzFdLFxuICAgIG1pbkxvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzJdLFxuICAgIG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdXG5cbiAgfVxuXG5mdW5jdGlvbiBtYWluKCkge1xuXG4gIGdldENvdW50cnlCb3VuZHMoJ1JvbWFuaWEnKVxuICAgIC50aGVuKGJvdW5kcyA9PiBjb25zb2xlLmxvZyhib3VuZHMpKTtcblxuIiwgIlxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiAgY29uc3Qgb2JqZWN0ID0gYXdhaXQgZ2V0T2JqZWN0RnJvbVVybChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2NvdW50cnk9JHtjb3VudHJ5fSZmb3JtYXQ9anNvbmApO1xuXG4gIHJldHVybiB7XG5cbiAgICBtaW5MYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzBdLFxuICAgIG1heExhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMV0sXG4gICAgbWluTG9uZ2l0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMl0sXG4gICAgbWF4TG9uZ2l0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbM11cblxuICB9XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG5cbiAgZ2V0Q291bnRyeUJvdW5kcygnUm9tYW5pYScpXG4gICAgLnRoZW4oYm91bmRzID0+IGNvbnNvbGUubG9nKGJvdW5kcykpO1xuXG59XG4iLCAiLyoqXG4qIDYgLSBVcm3Eg3JpyJtpICBhY2VzdCB2aWRlb2NsaXAgUzR2NkIubXA0IHBlbnRydSBhIHZlZGVhIGN1bSBzZSBwb2F0ZSBmYWNlIG8gY2VyZXJlIEhUVFAgZm9sb3NpbmQgUHJvbWlzZS11cmkgY3UgIGFzeW5jL2F3YWl0LlxuKiBURU1BOiBEdXDEgyBjZSBhyJtpIHRlc3RhdCBleGVtcGx1bCwgYmF6YXQgcGUgZXhlbXBsdWwgYW50ZXJpb3IgaW1wbGVtZW50YcibaSBvIGZ1bmPIm2llIChjdSBhc3luYy9hd2FpdCkgY2FyZSBvYsibaW5lIGxpc3RhIGF2aW9hbmVsb3IgZGUgZGVhc3VwcmEgUm9tw6JuaWVpLlxuKlxuKi9cblxuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE9iamVjdEZyb21VcmwodXJsKSB7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q291bnRyeUJvdW5kcyhjb3VudHJ5KSB7XG5cbiAgY29uc3Qgb2JqZWN0ID0gYXdhaXQgZ2V0T2JqZWN0RnJvbVVybChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2NvdW50cnk9JHtjb3VudHJ5fSZmb3JtYXQ9anNvbmApO1xuXG4gIHJldHVybiB7XG5cbiAgICBtaW5MYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzBdLFxuICAgIG1heExhdGl0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMV0sXG4gICAgbWluTG9uZ2l0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMl0sXG4gICAgbWF4TG9uZ2l0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbM11cblxuICB9XG4gIDtcblxufVxuXG5mdW5jdGlvbiBtYWluKCkge1xuXG4gIGdldENvdW50cnlCb3VuZHMoJ1JvbWFuaWEnKVxuICAgIC50aGVuKGJvdW5kcyA9PiBjb25zb2xlLmxvZyhib3VuZHMpKTtcblxufVxuXG5tYWluKCk7XG4iXSwgInN0eWxlIjogImltcGVyYXRpdmUiLCAic3RlcHMiOiBbeyJ0aXRsZSI6ICJJbXBvcnR1cmkgyJlpIGNvbnN0YW50ZSIsICJyYXRpb25hbGUiOiAiR2VzdGlvbmFyZWEgZGVwZW5kZW7Im2Vsb3IgyJlpIGEgY29uZmlndXLEg3JpbG9yIGdsb2JhbGUuIiwgImJsb2NrcyI6IFt7Im5hbWUiOiAiaW1wb3J0IiwgImtpbmQiOiAiaW1wb3J0IiwgInN0YXJ0IjogNiwgImVuZCI6IDd9LCB7Im5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAic3RhcnQiOiA2LCAiZW5kIjogN30sIHsibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJzdGFydCI6IDEwLCAiZW5kIjogMTF9LCB7Im5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAic3RhcnQiOiAxMiwgImVuZCI6IDEzfSwgeyJuYW1lIjogInZhciIsICJraW5kIjogImNvbnN0IiwgInN0YXJ0IjogMjAsICJlbmQiOiAzMH1dfSwgeyJ0aXRsZSI6ICJMb2dpY2EgcHJvY2VkdXJhbMSDIiwgInJhdGlvbmFsZSI6ICJJbXBsZW1lbnRhcmVhIGVmZWN0ZWxvciDImWkgYSBjb250cm9sdWx1aSBkZSBmbHV4LiIsICJibG9ja3MiOiBbeyJuYW1lIjogIm1haW4iLCAia2luZCI6ICJmdW5jIiwgInN0YXJ0IjogMzQsICJlbmQiOiA0MH1dfV0sICJwYXRjaGVzIjogW1t7Im9wIjogImluc2VydCIsICJzdGFydCI6IDAsICJlbmQiOiAwLCAidGV4dCI6ICIiLCAiZm9jdXNTdGFydCI6IDYsICJmb2N1c0VuZCI6IDcsICJzY3JvbGxMaW5lIjogNiwgIm5hbWUiOiAiaW1wb3J0IiwgImtpbmQiOiAiaW1wb3J0IiwgImJsa0lkIjogImltcG9ydDppbXBvcnRANi03IiwgImhJZCI6ICJodW5rOmltcG9ydDppbXBvcnRANi03OjEifV0sIFtdLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAxLCAiZW5kIjogMSwgInRleHQiOiAiIiwgImZvY3VzU3RhcnQiOiAxMCwgImZvY3VzRW5kIjogMTEsICJzY3JvbGxMaW5lIjogMTAsICJuYW1lIjogInZhciIsICJraW5kIjogImNvbnN0IiwgImJsa0lkIjogImNvbnN0OnZhckAxMC0xMSIsICJoSWQiOiAiaHVuazpjb25zdDp2YXJAMTAtMTE6MSJ9XSwgW3sib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogMiwgImVuZCI6IDIsICJ0ZXh0IjogIiIsICJmb2N1c1N0YXJ0IjogMTIsICJmb2N1c0VuZCI6IDEzLCAic2Nyb2xsTGluZSI6IDEyLCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMTItMTMiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDEyLTEzOjEifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDMsICJlbmQiOiAzLCAidGV4dCI6ICIiLCAiZm9jdXNTdGFydCI6IDIwLCAiZm9jdXNFbmQiOiAzMCwgInNjcm9sbExpbmUiOiAyMCwgIm5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAiYmxrSWQiOiAiY29uc3Q6dmFyQDIwLTMwIiwgImhJZCI6ICJodW5rOmNvbnN0OnZhckAyMC0zMDoxIn1dLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAwLCAiZW5kIjogMCwgInRleHQiOiAiXG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTsiLCAiZm9jdXNTdGFydCI6IDYsICJmb2N1c0VuZCI6IDcsICJzY3JvbGxMaW5lIjogNywgIm5hbWUiOiAiaW1wb3J0IiwgImtpbmQiOiAiaW1wb3J0IiwgImJsa0lkIjogImltcG9ydDppbXBvcnRANi03IiwgImhJZCI6ICJodW5rOmltcG9ydDppbXBvcnRANi03OjIifSwgeyJvcCI6ICJkZWxldGUiLCAic3RhcnQiOiAzLCAiZW5kIjogNCwgInRleHQiOiAiIn1dLCBbXSwgW3sib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogMywgImVuZCI6IDMsICJ0ZXh0IjogIiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpOyIsICJmb2N1c1N0YXJ0IjogMTAsICJmb2N1c0VuZCI6IDExLCAic2Nyb2xsTGluZSI6IDExLCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMTAtMTEiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDEwLTExOjIifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDUsICJlbmQiOiA1LCAidGV4dCI6ICIgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7IiwgImZvY3VzU3RhcnQiOiAxMiwgImZvY3VzRW5kIjogMTMsICJzY3JvbGxMaW5lIjogMTMsICJuYW1lIjogInZhciIsICJraW5kIjogImNvbnN0IiwgImJsa0lkIjogImNvbnN0OnZhckAxMi0xMyIsICJoSWQiOiAiaHVuazpjb25zdDp2YXJAMTItMTM6MiJ9XSwgW3sib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogNywgImVuZCI6IDcsICJ0ZXh0IjogIiAgY29uc3Qgb2JqZWN0ID0gYXdhaXQgZ2V0T2JqZWN0RnJvbVVybChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2NvdW50cnk9JHtjb3VudHJ5fSZmb3JtYXQ9anNvbmApOyIsICJmb2N1c1N0YXJ0IjogMjAsICJmb2N1c0VuZCI6IDMwLCAic2Nyb2xsTGluZSI6IDIxLCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMjAtMzAiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDIwLTMwOjIifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDgsICJlbmQiOiA4LCAidGV4dCI6ICIiLCAiZm9jdXNTdGFydCI6IDIwLCAiZm9jdXNFbmQiOiAzMCwgInNjcm9sbExpbmUiOiAyMiwgIm5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAiYmxrSWQiOiAiY29uc3Q6dmFyQDIwLTMwIiwgImhJZCI6ICJodW5rOmNvbnN0OnZhckAyMC0zMDozIn1dLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiA5LCAiZW5kIjogOSwgInRleHQiOiAiICByZXR1cm4geyIsICJmb2N1c1N0YXJ0IjogMjAsICJmb2N1c0VuZCI6IDMwLCAic2Nyb2xsTGluZSI6IDIzLCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMjAtMzAiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDIwLTMwOjQifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDEwLCAiZW5kIjogMTAsICJ0ZXh0IjogIiIsICJmb2N1c1N0YXJ0IjogMjAsICJmb2N1c0VuZCI6IDMwLCAic2Nyb2xsTGluZSI6IDI0LCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMjAtMzAiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDIwLTMwOjUifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDExLCAiZW5kIjogMTEsICJ0ZXh0IjogIiAgICBtaW5MYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzBdLCIsICJmb2N1c1N0YXJ0IjogMjAsICJmb2N1c0VuZCI6IDMwLCAic2Nyb2xsTGluZSI6IDI1LCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMjAtMzAiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDIwLTMwOjYifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDEyLCAiZW5kIjogMTIsICJ0ZXh0IjogIiAgICBtYXhMYXRpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzFdLCIsICJmb2N1c1N0YXJ0IjogMjAsICJmb2N1c0VuZCI6IDMwLCAic2Nyb2xsTGluZSI6IDI2LCAibmFtZSI6ICJ2YXIiLCAia2luZCI6ICJjb25zdCIsICJibGtJZCI6ICJjb25zdDp2YXJAMjAtMzAiLCAiaElkIjogImh1bms6Y29uc3Q6dmFyQDIwLTMwOjcifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDEzLCAiZW5kIjogMTMsICJ0ZXh0IjogIiAgICBtaW5Mb25naXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsyXSwiLCAiZm9jdXNTdGFydCI6IDIwLCAiZm9jdXNFbmQiOiAzMCwgInNjcm9sbExpbmUiOiAyNywgIm5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAiYmxrSWQiOiAiY29uc3Q6dmFyQDIwLTMwIiwgImhJZCI6ICJodW5rOmNvbnN0OnZhckAyMC0zMDo4In1dLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAxNCwgImVuZCI6IDE0LCAidGV4dCI6ICIgICAgbWF4TG9uZ2l0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbM10iLCAiZm9jdXNTdGFydCI6IDIwLCAiZm9jdXNFbmQiOiAzMCwgInNjcm9sbExpbmUiOiAyOCwgIm5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAiYmxrSWQiOiAiY29uc3Q6dmFyQDIwLTMwIiwgImhJZCI6ICJodW5rOmNvbnN0OnZhckAyMC0zMDo5In1dLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAxNSwgImVuZCI6IDE1LCAidGV4dCI6ICIiLCAiZm9jdXNTdGFydCI6IDIwLCAiZm9jdXNFbmQiOiAzMCwgInNjcm9sbExpbmUiOiAyOSwgIm5hbWUiOiAidmFyIiwgImtpbmQiOiAiY29uc3QiLCAiYmxrSWQiOiAiY29uc3Q6dmFyQDIwLTMwIiwgImhJZCI6ICJodW5rOmNvbnN0OnZhckAyMC0zMDoxMCJ9XSwgW3sib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogMTYsICJlbmQiOiAxNiwgInRleHQiOiAiICB9IiwgImZvY3VzU3RhcnQiOiAyMCwgImZvY3VzRW5kIjogMzAsICJzY3JvbGxMaW5lIjogMzAsICJuYW1lIjogInZhciIsICJraW5kIjogImNvbnN0IiwgImJsa0lkIjogImNvbnN0OnZhckAyMC0zMCIsICJoSWQiOiAiaHVuazpjb25zdDp2YXJAMjAtMzA6MTEifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDE3LCAiZW5kIjogMTcsICJ0ZXh0IjogIiIsICJmb2N1c1N0YXJ0IjogMzQsICJmb2N1c0VuZCI6IDQwLCAic2Nyb2xsTGluZSI6IDM0LCAibmFtZSI6ICJtYWluIiwgImtpbmQiOiAiZnVuYyIsICJibGtJZCI6ICJmdW5jOm1haW5AMzQtNDAiLCAiaElkIjogImh1bms6ZnVuYzptYWluQDM0LTQwOjEifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDE4LCAiZW5kIjogMTgsICJ0ZXh0IjogImZ1bmN0aW9uIG1haW4oKSB7IiwgImZvY3VzU3RhcnQiOiAzNCwgImZvY3VzRW5kIjogNDAsICJzY3JvbGxMaW5lIjogMzUsICJuYW1lIjogIm1haW4iLCAia2luZCI6ICJmdW5jIiwgImJsa0lkIjogImZ1bmM6bWFpbkAzNC00MCIsICJoSWQiOiAiaHVuazpmdW5jOm1haW5AMzQtNDA6MiJ9XSwgW3sib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogMTksICJlbmQiOiAxOSwgInRleHQiOiAiIiwgImZvY3VzU3RhcnQiOiAzNCwgImZvY3VzRW5kIjogNDAsICJzY3JvbGxMaW5lIjogMzYsICJuYW1lIjogIm1haW4iLCAia2luZCI6ICJmdW5jIiwgImJsa0lkIjogImZ1bmM6bWFpbkAzNC00MCIsICJoSWQiOiAiaHVuazpmdW5jOm1haW5AMzQtNDA6MyJ9XSwgW3sib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogMjAsICJlbmQiOiAyMCwgInRleHQiOiAiICBnZXRDb3VudHJ5Qm91bmRzKCdSb21hbmlhJykiLCAiZm9jdXNTdGFydCI6IDM0LCAiZm9jdXNFbmQiOiA0MCwgInNjcm9sbExpbmUiOiAzNywgIm5hbWUiOiAibWFpbiIsICJraW5kIjogImZ1bmMiLCAiYmxrSWQiOiAiZnVuYzptYWluQDM0LTQwIiwgImhJZCI6ICJodW5rOmZ1bmM6bWFpbkAzNC00MDo0In1dLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAyMSwgImVuZCI6IDIxLCAidGV4dCI6ICIgICAgLnRoZW4oYm91bmRzID0+IGNvbnNvbGUubG9nKGJvdW5kcykpOyIsICJmb2N1c1N0YXJ0IjogMzQsICJmb2N1c0VuZCI6IDQwLCAic2Nyb2xsTGluZSI6IDM4LCAibmFtZSI6ICJtYWluIiwgImtpbmQiOiAiZnVuYyIsICJibGtJZCI6ICJmdW5jOm1haW5AMzQtNDAiLCAiaElkIjogImh1bms6ZnVuYzptYWluQDM0LTQwOjUifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDIyLCAiZW5kIjogMjIsICJ0ZXh0IjogIiIsICJmb2N1c1N0YXJ0IjogMzQsICJmb2N1c0VuZCI6IDQwLCAic2Nyb2xsTGluZSI6IDM5LCAibmFtZSI6ICJtYWluIiwgImtpbmQiOiAiZnVuYyIsICJibGtJZCI6ICJmdW5jOm1haW5AMzQtNDAiLCAiaElkIjogImh1bms6ZnVuYzptYWluQDM0LTQwOjYifV0sIFt7Im9wIjogImluc2VydCIsICJzdGFydCI6IDIzLCAiZW5kIjogMjMsICJ0ZXh0IjogIn0iLCAiZm9jdXNTdGFydCI6IDM0LCAiZm9jdXNFbmQiOiA0MCwgInNjcm9sbExpbmUiOiA0MCwgIm5hbWUiOiAibWFpbiIsICJraW5kIjogImZ1bmMiLCAiYmxrSWQiOiAiZnVuYzptYWluQDM0LTQwIiwgImhJZCI6ICJodW5rOmZ1bmM6bWFpbkAzNC00MDo3In1dLCBbeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAwLCAiZW5kIjogMCwgInRleHQiOiAiLyoqXG4qIDYgLSBVcm3Eg3JpyJtpICBhY2VzdCB2aWRlb2NsaXAgUzR2NkIubXA0IHBlbnRydSBhIHZlZGVhIGN1bSBzZSBwb2F0ZSBmYWNlIG8gY2VyZXJlIEhUVFAgZm9sb3NpbmQgUHJvbWlzZS11cmkgY3UgIGFzeW5jL2F3YWl0LlxuKiBURU1BOiBEdXDEgyBjZSBhyJtpIHRlc3RhdCBleGVtcGx1bCwgYmF6YXQgcGUgZXhlbXBsdWwgYW50ZXJpb3IgaW1wbGVtZW50YcibaSBvIGZ1bmPIm2llIChjdSBhc3luYy9hd2FpdCkgY2FyZSBvYsibaW5lIGxpc3RhIGF2aW9hbmVsb3IgZGUgZGVhc3VwcmEgUm9tw6JuaWVpLlxuKlxuKi8ifSwgeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAyLCAiZW5kIjogMiwgInRleHQiOiAiXG5hc3luYyBmdW5jdGlvbiBnZXRPYmplY3RGcm9tVXJsKHVybCkgeyJ9LCB7Im9wIjogImluc2VydCIsICJzdGFydCI6IDYsICJlbmQiOiA2LCAidGV4dCI6ICJcbiAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q291bnRyeUJvdW5kcyhjb3VudHJ5KSB7In0sIHsib3AiOiAiaW5zZXJ0IiwgInN0YXJ0IjogMTcsICJlbmQiOiAxNywgInRleHQiOiAiICA7XG5cbn0ifSwgeyJvcCI6ICJpbnNlcnQiLCAic3RhcnQiOiAyNCwgImVuZCI6IDI0LCAidGV4dCI6ICJcbm1haW4oKTsifV1dLCAibGxtIjogeyJwcm92aWRlciI6ICJNaXN0cmFsIENvZGVzdHJhbCIsICJtb2RlbCI6ICJjb2Rlc3RyYWwtbGF0ZXN0IiwgIm5vdGVzIjogeyJpbXBvcnQ6aW1wb3J0QDYtNyI6ICJgYGBtYXJrZG93blxuLSAqKlJvbCoqOiBQcm9mZXNvcnVsIGRlIHByb2dyYW1hcmUgSmF2YVNjcmlwdFxuLSAqKkludHLEg3JpL0llyJlpcmkqKjpcbiAgLSAqKkludHLEg3JpKio6IEN1bm/ImXRpbsibZSBkZSBiYXrEgyDDrm4gSmF2YVNjcmlwdCwgbW9kdWx1bCBgbm9kZS1mZXRjaGAgaW5zdGFsYXQgw65uIHByb2llY3R1bCBOb2RlLmpzLlxuICAtICoqSWXImWlyaSoqOiDDjm7Im2VsZWdlcmVhIG1vZHVsdWx1aSBgbm9kZS1mZXRjaGAgyJlpIGEgbW9kdWx1bHVpIGByZXF1aXJlYCDDrm4gTm9kZS5qcy5cbi0gKipFZmVjdGUqKjpcbiAgLSDDjm7Im2VsZWdlcmVhIG1vZHVsdWx1aSBgbm9kZS1mZXRjaGAgcGVudHJ1IGEgZWZlY3R1YSBjZXJlcmkgSFRUUCDDrm4gTm9kZS5qcy5cbiAgLSDDjm7Im2VsZWdlcmVhIG1vZHVsdWx1aSBgcmVxdWlyZWAgcGVudHJ1IGEgaW1wb3J0YSBtb2R1bGUgw65uIE5vZGUuanMuXG4gIC0gQ2FwYWNpdGF0ZWEgZGUgYSB1dGlsaXphIGBub2RlLWZldGNoYCBwZW50cnUgYSBpbnRlcmFjyJtpb25hIGN1IEFQSS11cmkgc2F1IGFsdGUgc2VydmljaWkgd2ViLlxuYGBgIiwgImNvbnN0OnZhckA2LTciOiAiYGBgbWFya2Rvd25cbi0gKipSb2wqKjogUHJvZmVzb3J1bCBkZSBwcm9ncmFtYXJlIEphdmFTY3JpcHRcbi0gKipJbnRyxINyaS9JZciZaXJpKio6XG4gIC0gKipJbnRyxINyaSoqOiBDdW5vyJl0aW7Im2UgZGUgYmF6xIMgw65uIEphdmFTY3JpcHQsIGluc3RhbGFyZWEgTm9kZS5qcyDImWkgbnBtXG4gIC0gKipJZciZaXJpKio6IMOObsibZWxlZ2VyZWEgbW9kdWx1bHVpIGBub2RlLWZldGNoYCDImWkgdXRpbGl6YXJlYSBzYSBwZW50cnUgYSBmYWNlIGNlcmVyaSBIVFRQIMOubiBhcGxpY2HIm2lpbGUgTm9kZS5qc1xuLSAqKkVmZWN0ZSoqOlxuICAtICoqRWZlY3RlIHBveml0aXZlKio6IMOObsibZWxlZ2VyZWEgyJlpIHV0aWxpemFyZWEgbW9kdWx1bHVpIGBub2RlLWZldGNoYCBwZW50cnUgYSBmYWNlIGNlcmVyaSBIVFRQIMOubiBhcGxpY2HIm2lpbGUgTm9kZS5qcywgw65tYnVuxIN0xIPIm2lyZWEgYWJpbGl0xIPIm2lsb3IgZGUgcHJvZ3JhbWFyZSBKYXZhU2NyaXB0XG4gIC0gKipFZmVjdGUgbmVnYXRpdmUqKjogRGlmaWN1bHTEg8ibaSDDrm4gaW5zdGFsYXJlYSDImWkgY29uZmlndXJhcmVhIG1vZHVsdWx1aSBgbm9kZS1mZXRjaGAsIGVyb3JpIMOubiBjb2R1bCBzY3JpcyBkZSBlbGV2aVxuLSAqKkFjdGl2aXTEg8ibaSBkaWRhY3RpY2UqKjpcbiAgLSBQcmV6ZW50YXJlYSBtb2R1bHVsdWkgYG5vZGUtZmV0Y2hgIMiZaSBhIGZ1bmPIm2lvbmFsaXTEg8ibaWxvciBzYWxlXG4gIC0gRXhlbXBsZSBwcmFjdGljZSBkZSB1dGlsaXphcmUgYSBtb2R1bHVsdWkgYG5vZGUtZmV0Y2hgIHBlbnRydSBhIGZhY2UgY2VyZXJpIEhUVFBcbiAgLSBFeGVyY2nIm2lpIMiZaSBwcm9pZWN0ZSBwZW50cnUgYSBhcGxpY2EgY3Vub8iZdGluyJtlbGUgZG9iw6JuZGl0ZVxuLSAqKkV2YWx1YXJlKio6XG4gIC0gRXZhbHVhcmVhIGN1bm/ImXRpbsibZWxvciBkb2LDom5kaXRlIHByaW4gaW50ZXJtZWRpdWwgZXhlcmNpyJtpaWxvciDImWkgcHJvaWVjdGVsb3JcbiAgLSBGZWVkYmFjay11bCBmdXJuaXphdCBkZSBlbGV2aSBwZW50cnUgYSDDrm1idW7Eg3TEg8ibaSBwcmV6ZW50YXJlYSDImWkgYWN0aXZpdMSDyJtpbGUgZGlkYWN0aWNlXG5gYGAiLCAiY29uc3Q6dmFyQDEwLTExIjogIiMjIyAqKkJ1bGxldHMgRGlkYWN0aWNlIHBlbnRydSBgZmV0Y2hgIMOubiBKYXZhU2NyaXB0KipcblxuLSAqKlJvbCoqOlxuICAtIGBmZXRjaGAgZXN0ZSBvIGZ1bmPIm2llIGFzaW5jcm9uxIMgdXRpbGl6YXTEgyBwZW50cnUgYSBmYWNlIGNlcmVyaSBIVFRQIGPEg3RyZSB1biBzZXJ2ZXIuXG4gIC0gUmV0dXJuZWF6xIMgbyBwcm9taXNpdW5lIChgUHJvbWlzZWApIGNhcmUgc2UgcmV6b2x2xIMgY3UgdW4gb2JpZWN0IGBSZXNwb25zZWAuXG5cbi0gKipJbnRyxINyaS9JZciZaXJpKio6XG4gIC0gKipJbnRyxINyaSoqOlxuICAgIC0gYHVybGA6IEFkcmVzYSBjxIN0cmUgY2FyZSBzZSBmYWNlIGNlcmVyZWEgKHN0cmluZykuXG4gICAgLSAoT3DIm2lvbmFsKSBgb3B0aW9uc2A6IFVuIG9iaWVjdCBjYXJlIHBvYXRlIGluY2x1ZGUgbWV0b2RlIEhUVFAsIGFudGV0ZSwgY29ycHVsIGNlcmVyaWksIGV0Yy5cbiAgLSAqKkllyJlpcmkqKjpcbiAgICAtIFByb21pc2l1bmUgY2FyZSBzZSByZXpvbHbEgyBjdSB1biBvYmllY3QgYFJlc3BvbnNlYCBkYWPEgyBjZXJlcmVhIGVzdGUgcmV1yJlpdMSDLlxuICAgIC0gUHJvbWlzaXVuZSBjYXJlIHNlIHJlc3BpbmdlIGRhY8SDIGNlcmVyZWEgZciZdWVhesSDIChleDogZXJvYXJlIGRlIHJlyJtlYSkuXG5cbi0gKipFZmVjdGUqKjpcbiAgLSAqKkVmZWN0ZSBzZWN1bmRhcmUqKjogVHJpbWl0ZSBvIGNlcmVyZSBjxIN0cmUgc2VydmVyLCBjb25zdW3Dom5kIHJlc3Vyc2UgZGUgcmXIm2VhLlxuICAtICoqRWZlY3RlIGRlIHNpc3RlbSoqOiBOdSBtb2RpZmljxIMgc3RhcmVhIGFwbGljYcibaWVpLCBkYXIgcG9hdGUgZGVjbGFuyJlhIGFsdGUgYWPIm2l1bmkgYXNpbmNyb25lLlxuXG4tICoqRXhlbXBsdSBkZSB1dGlsaXphcmUqKjpcbiAgYGBganNcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZGF0YScpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyAvLyBQYXJzZWF6xIMgcsSDc3B1bnN1bCBjYSBKU09OXG4gIGBgYFxuXG4tICoqQXZhbnRhamUqKjpcbiAgLSBTaW1wbHUgyJlpIG1vZGVybiAoZm9sb3NlyJl0ZSBwcm9taXNpdW5pKS5cbiAgLSBTdXBvcnTEgyBjZXJlcmkgYXNpbmNyb25lIGbEg3LEgyBhIGJsb2NhIGZpcnVsIGRlIGV4ZWN1yJtpZS5cblxuLSAqKkRlenZhbnRhamUqKjpcbiAgLSBOdSBnZXN0aW9uZWF6xIMgZXJvcmlsZSBkZSByZcibZWEgYXV0b21hdCAodHJlYnVpZSB0cmF0YXRlIG1hbnVhbCkuXG4gIC0gTnUgc3Vwb3J0xIMgY2VyZXJpIGBYTUxIdHRwUmVxdWVzdGAgbWFpIHZlY2hpLiIsICJjb25zdDp2YXJAMTItMTMiOiAiIyMjIEJ1bGxldHMgRGlkYWN0aWNlXG5cbi0gKipSb2wqKjogQWNlYXN0xIMgbGluaWUgZGUgY29kIGVzdGUgdXRpbGl6YXTEgyBwZW50cnUgYSBleHRyYWdlIGNvbsibaW51dHVsIHRleHQgYWwgdW51aSByxINzcHVucyBIVFRQIHByaW1pdCBkZSBsYSB1biBzZXJ2ZXIuIEVzdGUgcGFydGUgYSB1bmVpIG9wZXJhyJtpaSBhc2luY3JvbmUsIGRlb2FyZWNlIGZvbG9zZciZdGUgYGF3YWl0YCBwZW50cnUgYSBhyJl0ZXB0YSBmaW5hbGl6YXJlYSBjZXJlcmlpLlxuXG4tICoqSW50csSDcmkvSWXImWlyaSoqOlxuICAtICoqSW50csSDcmkqKjogYHJlc3BvbnNlYCAtIHVuIG9iaWVjdCBkZSByxINzcHVucyBIVFRQIHByaW1pdCBkZSBsYSB1biBzZXJ2ZXIuXG4gIC0gKipJZciZaXJpKio6IGB0ZXh0YCAtIG8gdmFyaWFiaWzEgyBjYXJlIGNvbsibaW5lIGNvbsibaW51dHVsIHRleHQgYWwgcsSDc3B1bnN1bHVpIEhUVFAuXG5cbi0gKipFZmVjdGUqKjpcbiAgLSAqKkVmZWN0ZSBzZWN1bmRhcmUqKjogTnUgZXhpc3TEgyBlZmVjdGUgc2VjdW5kYXJlIGRpcmVjdGUsIGRhciBvcGVyYcibaWEgYXNpbmNyb27EgyBwb2F0ZSBkdWNlIGxhIGJsb2NhcmVhIGV4ZWN1yJtpZWkgY29kdWx1aSBww6JuxIMgY8OibmQgcsSDc3B1bnN1bCBlc3RlIHByaW1pdC5cbiAgLSAqKkVmZWN0ZSBkZSBwZXJmb3JtYW7Im8SDKio6IFV0aWxpemFyZWEgYGF3YWl0YCBwb2F0ZSBhZmVjdGEgcGVyZm9ybWFuyJthIGRhY8SDIHLEg3NwdW5zdWwgZXN0ZSDDrm50w6JyemlhdCBzYXUgZGFjxIMgY2VyZXJlYSBlc3RlIGJsb2NhdMSDLlxuXG4tICoqQ29udGV4dCoqOlxuICAtICoqQ29udGV4dCBkZSB1dGlsaXphcmUqKjogQWNlYXN0xIMgbGluaWUgZGUgY29kIGVzdGUgdXRpbGl6YXTEgyDDrm4gY29udGV4dHVsIHVuZWkgYXBsaWNhyJtpaSB3ZWIgY2FyZSBpbnRlcmFjyJtpb25lYXrEgyBjdSB1biBzZXJ2ZXIgcGVudHJ1IGEgcHJlbHVhIGRhdGUgdGV4dC5cbiAgLSAqKkRlcGVuZGVuyJtlKio6IERlcGluZGUgZGUgdW4gb2JpZWN0IGByZXNwb25zZWAgdmFsaWQgY2FyZSBhIGZvc3QgcHJpbWl0IGRlIGxhIHVuIHNlcnZlci5cblxuLSAqKkV4ZW1wbHUgZGUgdXRpbGl6YXJlKio6XG4gIGBgYGpzXG4gIGFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5leGFtcGxlLmNvbS9kYXRhJyk7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAgfVxuICBmZXRjaERhdGEoKTtcbiAgYGBgXG5cbi0gKipQb3NpYmlsZSBlcm9yaSoqOlxuICAtICoqRXJvcmkgZGUgcmXIm2VhKio6IERhY8SDIGNlcmVyZWEgSFRUUCBlyJl1ZWF6xIMgZGluIGNhdXphIHByb2JsZW1lbG9yIGRlIHJlyJtlYSwgYHJlc3BvbnNlLnRleHQoKWAgdmEgYXJ1bmNhIG8gZXJvYXJlLlxuICAtICoqRXJvcmkgZGUgcGFyc2FyZSoqOiBEYWPEgyByxINzcHVuc3VsIG51IGVzdGUgdW4gdGV4dCB2YWxpZCwgYHJlc3BvbnNlLnRleHQoKWAgcG9hdGUgYXJ1bmNhIG8gZXJvYXJlLiIsICJjb25zdDp2YXJAMjAtMzAiOiAiIyMjIEJ1bGxldHMgRGlkYWN0aWNlXG5cbi0gKipSb2wqKjogRnVuY8ibaWEgZXh0cmFnZSBjb29yZG9uYXRlbGUgZ2VvZ3JhZmljZSAobGF0aXR1ZGluZSDImWkgbG9uZ2l0dWRpbmUpIGFsZSB1bnVpIMibYXLEgyBzcGVjaWZpY2F0xIMsIGZvbG9zaW5kIEFQSS11bCBOb21pbmF0aW0gYWwgT3BlblN0cmVldE1hcC4gQWNlc3RlIGNvb3Jkb25hdGUgc3VudCB1dGlsaXphdGUgcGVudHJ1IGEgZGVmaW5pIGdyYW5pyJtlbGUgZ2VvZ3JhZmljZSBhbGUgyJvEg3JpaS5cblxuLSAqKkludHLEg3JpL0llyJlpcmkqKjpcbiAgLSAqKkludHLEg3JpKio6IEZ1bmPIm2lhIHByaW1lyJl0ZSB1biBwYXJhbWV0cnUgYGNvdW50cnlgLCBjYXJlIHJlcHJlemludMSDIG51bWVsZSDIm8SDcmlpIHBlbnRydSBjYXJlIHNlIGRvcmVzYyBjb29yZG9uYXRlbGUgZ2VvZ3JhZmljZS5cbiAgLSAqKkllyJlpcmkqKjogRnVuY8ibaWEgcmV0dXJuZWF6xIMgdW4gb2JpZWN0IGN1IHBhdHJ1IHByb3ByaWV0xIPIm2k6IGBtaW5MYXRpdHVkZWAsIGBtYXhMYXRpdHVkZWAsIGBtaW5Mb25naXR1ZGVgLCDImWkgYG1heExvbmdpdHVkZWAsIGNhcmUgZGVmaW5lc2MgZ3JhbmnIm2VsZSBnZW9ncmFmaWNlIGFsZSDIm8SDcmlpLlxuXG4tICoqRWZlY3RlKio6XG4gIC0gKipFZmVjdGUgc2VjdW5kYXJlKio6IEZ1bmPIm2lhIGZhY2UgdW4gYXBlbCBBUEkgY8SDdHJlIHNlcnZlcnVsIE5vbWluYXRpbSwgY2VlYSBjZSBwb2F0ZSBkdWNlIGxhIMOubnTDonJ6aWVyaSDImWkgZXJvcmkgZGUgcmXIm2VhLlxuICAtICoqRWZlY3RlIGRlIHBlcmZvcm1hbsibxIMqKjogQXBlbHVsIEFQSSBwb2F0ZSBmaSBsZW50LCBkZW9hcmVjZSBkZXBpbmRlIGRlIGRpc3BvbmliaWxpdGF0ZWEgyJlpIHZpdGV6YSBzZXJ2ZXJ1bHVpIE5vbWluYXRpbS5cbiAgLSAqKkVmZWN0ZSBkZSBzZWN1cml0YXRlKio6IEZ1bmPIm2lhIHV0aWxpemVhesSDIHVuIFVSTCBleHRlcm4sIGNlZWEgY2UgcG9hdGUgcHVuZSDDrm4gcGVyaWNvbCBzZWN1cml0YXRlYSBkYXRlbG9yIGRhY8SDIFVSTC11bCBudSBlc3RlIHNpZ3VyIHNhdSBkYWPEgyByxINzcHVuc3VsIEFQSSBudSBlc3RlIHZlcmlmaWNhdCBjb3Jlc3B1bnrEg3Rvci5cblxuLSAqKkV4ZW1wbGUgZGUgdXRpbGl6YXJlKio6XG4gIGBgYGpzXG4gIGNvbnN0IGNvdW50cnlDb29yZGluYXRlcyA9IGF3YWl0IGdldENvdW50cnlDb29yZGluYXRlcygnUm9tYW5pYScpO1xuICBjb25zb2xlLmxvZyhjb3VudHJ5Q29vcmRpbmF0ZXMpO1xuICAvLyBPdXRwdXQ6IHsgbWluTGF0aXR1ZGU6ICc0My42MicsIG1heExhdGl0dWRlOiAnNDguMjcnLCBtaW5Mb25naXR1ZGU6ICcyMC4yNicsIG1heExvbmdpdHVkZTogJzI5LjY5JyB9XG4gIGBgYFxuXG4tICoqRGVwZW5kZW7Im2UqKjpcbiAgLSBGdW5jyJtpYSBkZXBpbmRlIGRlIGZ1bmPIm2lhIGBnZXRPYmplY3RGcm9tVXJsYCwgY2FyZSB0cmVidWllIHPEgyBmaWUgZGVmaW5pdMSDIMiZaSBzxIMgcmV0dXJuZXplIHVuIG9iaWVjdCBKU09OIGRpbnRyLXVuIFVSTCBkYXQuXG4gIC0gRnVuY8ibaWEgZGVwaW5kZSBkZSBkaXNwb25pYmlsaXRhdGVhIMiZaSBzdGFiaWxpdGF0ZWEgQVBJLXVsdWkgTm9taW5hdGltLlxuXG4tICoqUG9zaWJpbGUgZXJvcmkqKjpcbiAgLSBEYWPEgyDIm2FyYSBzcGVjaWZpY2F0xIMgbnUgZXN0ZSBnxINzaXTEgywgZnVuY8ibaWEgcG9hdGUgYXJ1bmNhIG8gZXJvYXJlIHNhdSByZXR1cm5hIHVuIG9iaWVjdCBnb2wuXG4gIC0gRGFjxIMgYXBlbHVsIEFQSSBjxIN0cmUgTm9taW5hdGltIGXImXVlYXrEgywgZnVuY8ibaWEgcG9hdGUgYXJ1bmNhIG8gZXJvYXJlIGRlIHJlyJtlYS4iLCAiZnVuYzptYWluQDM0LTQwIjogIiMjIyBCdWxsZXRzIERpZGFjdGljZVxuXG4tICoqUm9sKio6IEZ1bmPIm2lhIGBtYWluYCBlc3RlIHB1bmN0dWwgZGUgaW50cmFyZSBhbCBwcm9ncmFtdWx1aS4gRWEgaW5pyJtpYXrEgyBwcm9jZXN1bCBkZSBvYsibaW5lcmUgYSBsaW1pdGVsb3IgZ2VvZ3JhZmljZSBhbGUgUm9tw6JuaWVpIMiZaSBhZmnImWVhesSDIHJlenVsdGF0dWwgw65uIGNvbnNvbMSDLlxuXG4tICoqSW50csSDcmkvSWXImWlyaSoqOlxuICAtICoqSW50csSDcmkqKjogRnVuY8ibaWEgYG1haW5gIG51IHByaW1lyJl0ZSBuaWNpdW4gcGFyYW1ldHJ1LlxuICAtICoqSWXImWlyaSoqOiBGdW5jyJtpYSBgbWFpbmAgbnUgcmV0dXJuZWF6xIMgbmljaW8gdmFsb2FyZS4gRWEgYWZpyJllYXrEgyBsaW1pdGVsZXJlbGUgZ2VvZ3JhZmljZSBhbGUgUm9tw6JuaWVpIMOubiBjb25zb2zEgy5cblxuLSAqKkVmZWN0ZSoqOlxuICAtICoqRWZlY3RlIHNlY3VuZGFyZSoqOiBGdW5jyJtpYSBgbWFpbmAgYXJlIHVuIGVmZWN0IHNlY3VuZGFyLCBhbnVtZSBhZmnImWFyZWEgbGltaXRlbG9yIGdlb2dyYWZpY2UgYWxlIFJvbcOibmllaSDDrm4gY29uc29sxIMuXG4gIC0gKipFZmVjdGUgZGUgcHJvZ3JhbWFyZSoqOiBGdW5jyJtpYSBgbWFpbmAgdXRpbGl6ZWF6xIMgbyBwcm9taXNpdW5lIChgUHJvbWlzZWApIHBlbnRydSBhIG9iyJtpbmUgbGltaXRlbGVyZWxlIGdlb2dyYWZpY2UgYWxlIFJvbcOibmllaS4gQWNlYXN0YSBpbmRpY8SDIGZhcHR1bCBjxIMgb3BlcmHIm2lhIGRlIG9iyJtpbmVyZSBhIGxpbWl0ZWxvciBlc3RlIGFzaW5jcm9uxIMuXG5cbi0gKipDb250ZXh0Kio6XG4gIC0gKipDb250ZXh0IGRlIHV0aWxpemFyZSoqOiBGdW5jyJtpYSBgbWFpbmAgZXN0ZSB1dGlsaXphdMSDIHBlbnRydSBhIGRlbW9uc3RyYSBjdW0gc2UgcG90IG9iyJtpbmUgyJlpIGFmaciZYSBsaW1pdGVsZXJlbGUgZ2VvZ3JhZmljZSBhbGUgUm9tw6JuaWVpIHV0aWxpesOibmQgbyBwcm9taXNpdW5lLlxuICAtICoqQ29udGV4dCB0ZWhub2xvZ2ljKio6IEZ1bmPIm2lhIGBtYWluYCB1dGlsaXplYXrEgyBKYXZhU2NyaXB0IMiZaSBwcm9taXNpdW5pIHBlbnRydSBhIGdlc3Rpb25hIG9wZXJhyJtpaSBhc2luY3JvbmUuXG5cbi0gKipFeGVtcGxlIGRlIHV0aWxpemFyZSoqOlxuICAtICoqRXhlbXBsdSBkZSB1dGlsaXphcmUqKjogRnVuY8ibaWEgYG1haW5gIHBvYXRlIGZpIHV0aWxpemF0xIMgcGVudHJ1IGEgb2LIm2luZSDImWkgYWZpyJlhIGxpbWl0ZWxlcmVsZSBnZW9ncmFmaWNlIGFsZSBSb23Dom5pZWkgw65udHItdW4gbWVkaXUgZGUgZGV6dm9sdGFyZSBzYXUgZGUgdGVzdGFyZS5cbiAgLSAqKkV4ZW1wbHUgZGUgaW50ZWdyYXJlKio6IEZ1bmPIm2lhIGBtYWluYCBwb2F0ZSBmaSBpbnRlZ3JhdMSDIMOubnRyLXVuIHNpc3RlbSBtYWkgbWFyZSBwZW50cnUgYSBvYsibaW5lIMiZaSBwcm9jZXNhIGxpbWl0ZWxlcmVsZSBnZW9ncmFmaWNlIGFsZSBSb23Dom5pZWkuXG5cbi0gKipEZXBlbmRlbsibZSoqOlxuICAtICoqRGVwZW5kZW7Im2UgZXh0ZXJuZSoqOiBGdW5jyJtpYSBgbWFpbmAgZGVwaW5kZSBkZSBmdW5jyJtpYSBgZ2V0Q291bnRyeUJvdW5kc2AsIGNhcmUgZXN0ZSByZXNwb25zYWJpbMSDIHBlbnRydSBvYsibaW5lcmVhIGxpbWl0ZWxvciBnZW9ncmFmaWNlIGFsZSBSb23Dom5pZWkuXG4gIC0gKipEZXBlbmRlbsibZSBpbnRlcm5lKio6IEZ1bmPIm2lhIGBtYWluYCBudSBhcmUgZGVwZW5kZW7Im2UgaW50ZXJuZS4ifSwgIm1pY3JvIjogeyJodW5rOmltcG9ydDppbXBvcnRANi03OjIiOiAiLSAqKkFjY2VzIGxhIGZ1bmPIm2lvbmFsaXTEg8ibaSBleHRlcm5lKio6IEFkYXVnxIMgYG5vZGUtZmV0Y2hgIHBlbnRydSBhIHBlcm1pdGUgYXBlbHVyaSBIVFRQIGRpbiBjb2R1bCBKYXZhU2NyaXB0L1R5cGVTY3JpcHQsIGZhY2lsaXTDom5kIGludGVyYWPIm2l1bmVhIGN1IEFQSS11cmkgZXh0ZXJuZS5cbi0gKipDb21wYXRpYmlsaXRhdGUgY3UgTm9kZS5qcyoqOiBBc2lndXLEgyBjb21wYXRpYmlsaXRhdGVhIGN1IG1lZGl1bCBOb2RlLmpzLCB1bmRlIGBmZXRjaGAgbnUgZXN0ZSBkaXNwb25pYmlsIG5hdGl2LlxuLSAqKlNpbXBsaWZpY2FyZSBhIGNvZHVsdWkqKjogUGVybWl0ZSB1dGlsaXphcmVhIHVudWkgQVBJIHN0YW5kYXJkaXphdCBwZW50cnUgY2VyZXJpIEhUVFAsIHNpbXBsaWZpY8OibmQgY29kdWwgyJlpIGZhY2lsaXTDom5kIG1lbsibaW5lcmVhIHNhLiIsICJodW5rOmNvbnN0OnZhckAxMC0xMToyIjogIi0gKipBc2luY3Jvbml0YXRlKio6IEFkYXVnxIMgYGF3YWl0YCBwZW50cnUgYSBhyJl0ZXB0YSByxINzcHVuc3VsIGRlIGxhIGNlcmVyZSDDrm5haW50ZSBkZSBhIGNvbnRpbnVhIGV4ZWN1yJtpYSBjb2R1bHVpLCBmxINjw6JuZCBmdW5jyJtpYSBhc2luY3JvbsSDLlxuLSAqKkdlc3Rpb25hcmUgZXJvcmkqKjogUGVybWl0ZSBnZXN0aW9uYXJlYSBlcm9yaWxvciBwcmluIGJsb2N1cmkgYHRyeS9jYXRjaGAgcGVudHJ1IGEgdHJhdGEgcG9zaWJpbGUgZciZZWN1cmkgYWxlIGNlcmVyaWkuXG4tICoqU2ltcGxpZmljYXJlIGNvZCoqOiBSZWR1Y2UgY29tcGxleGl0YXRlYSBjb2R1bHVpIHByaW4gZWxpbWluYXJlYSBjYWxsYmFjay11cmlsb3Igc2F1IHByb21pc2l1bmlsb3Igw65ubMSDbsibdWl0ZSwgZsSDY8OibmQgY29kdWwgbWFpIHXImW9yIGRlIGNpdGl0IMiZaSDDrm50cmXIm2ludXQuIiwgImh1bms6Y29uc3Q6dmFyQDEyLTEzOjIiOiAiLSAqKkV4dHJhZ2UgdGV4dHVsIHLEg3NwdW5zdWx1aSoqOiBJbnNlcsibaWEgYGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7YCBleHRyYWdlIGNvbsibaW51dHVsIHRleHQgYWwgcsSDc3B1bnN1bHVpIHByaW1pdCBkZSBsYSBzZXJ2ZXIuXG4tICoqUGVybWl0ZSBwcmVsdWNyYXJlYSBkYXRlbG9yKio6IEFjZWFzdMSDIGxpbmllIGRlIGNvZCBwZXJtaXRlIHByZWx1Y3JhcmVhIGRhdGVsb3IgdGV4dCBleHRyYXNlLCBmYWNpbGl0w6JuZCBtYW5pcHVsYXJlYSDImWkgdXRpbGl6YXJlYSBsb3Igw65uIGFwbGljYcibaWUuXG4tICoqQXNpZ3VyxIMgY29tcGF0aWJpbGl0YXRlYSBjdSByxINzcHVuc3VyaWxlIHRleHQqKjogQWTEg3VnYXJlYSBhY2VzdGVpIGxpbmlpIGFzaWd1csSDIGPEgyBhcGxpY2HIm2lhIHBvYXRlIGdlc3Rpb25hIGNvcmVjdCByxINzcHVuc3VyaWxlIHRleHQgZGluIGNlcmVyaSBIVFRQLCBmxINjw6JuZC1vIG1haSByb2J1c3TEgyDImWkgZmxleGliaWzEgy4iLCAiaHVuazpjb25zdDp2YXJAMjAtMzA6MiI6ICItICoqQWNjZXN1bCBsYSBkYXRlIGdlb2dyYWZpY2UqKjogSW5zZXLIm2lhIHBlcm1pdGUgb2LIm2luZXJlYSBkZSBpbmZvcm1hyJtpaSBkZXNwcmUgdW4gYW51bWl0IMibYXLEgyBkaW4gQVBJLXVsIE5vbWluYXRpbSBhbCBPcGVuU3RyZWV0TWFwLCBpbmNsdXNpdiBjb29yZG9uYXRlbGUgZ2VvZ3JhZmljZSDImWkgYWx0ZSBkZXRhbGlpIHJlbGV2YW50ZS5cbi0gKipVdGlsaXphcmVhIGFzaW5jcm9uxIMqKjogRnVuY8ibaWEgYGdldE9iamVjdEZyb21VcmxgIGVzdGUgYXBlbGF0xIMgY3UgYGF3YWl0YCwgcGVybWnIm8OibmQgb2LIm2luZXJlYSBkYXRlbG9yIMOubnRyLXVuIG1vZCBhc2luY3JvbiwgZsSDcsSDIGEgYmxvY2EgZXhlY3XIm2lhIGNvZHVsdWkuXG4tICoqRmxleGliaWxpdGF0ZSoqOiBWYXJpYWJpbGEgYGNvdW50cnlgIHBvYXRlIGZpIMOubmxvY3VpdMSDIGN1IG9yaWNlIMibYXLEgyBkb3JpdMSDLCBmxINjw6JuZCBmdW5jyJtpYSByZXV0aWxpemFiaWzEgyBwZW50cnUgZGl2ZXJzZSBjZXJpbsibZSBnZW9ncmFmaWNlLiIsICJodW5rOmNvbnN0OnZhckAyMC0zMDo0IjogIi0gKipDbGFyaXRhdGUqKjogw45uc2VyyJtpYSBgY29uc3QgdmFyYCBsYSDDrm5jZXB1dHVsIGZ1bmPIm2llaSBmYWNlIGNsYXLEgyBpbnRlbsibaWEgZGUgYSBkZWNsYXJhIG8gdmFyaWFiaWzEgyBjb25zdGFudMSDLCBjZWVhIGNlIHBvYXRlIGFqdXRhIGxhIMOubsibZWxlZ2VyZWEgY29kdWx1aSBkZSBjxIN0cmUgYWzIm2kgZGV6dm9sdGF0b3JpLlxuLSAqKlNjb3AqKjogQWNlYXN0xIMgaW5zZXLIm2llIHBvYXRlIGluZGljYSBmYXB0dWwgY8SDIHZhcmlhYmlsYSBkZWNsYXJhdMSDIG51IHZhIGZpIG1vZGlmaWNhdMSDIHVsdGVyaW9yIMOubiBmdW5jyJtpZSwgY2VlYSBjZSBwb2F0ZSBmaSB1dGlsIHBlbnRydSBhIGV2aXRhIGVyb3JpIGRlIHByb2dyYW1hcmUuXG4tICoqRWZpY2llbsibxIMqKjogRGVjbGFyYXJlYSB2YXJpYWJpbGVsb3IgY29uc3RhbnRlIHBvYXRlIGFqdXRhIGxhIG9wdGltaXphcmVhIGNvZHVsdWkgZGUgY8SDdHJlIG1vdG9ydWwgSmF2YVNjcmlwdCwgZGVvYXJlY2UgbW90b3J1bCDImXRpZSBjxIMgbnUgdHJlYnVpZSBzxIMgYWxvY2UgbWVtb3JpZSBwZW50cnUgbW9kaWZpY8SDcmkgdWx0ZXJpb2FyZSBhbGUgdmFyaWFiaWxlaS5cbi0gKipEb2N1bWVudGHIm2llKio6IMOObnNlcsibaWEgYGNvbnN0IHZhcmAgcG9hdGUgc2VydmkgY2EgbyBmb3JtxIMgZGUgZG9jdW1lbnRhyJtpZSBpbnRlcm7EgywgaW5kaWPDom5kIGPEgyB2YXJpYWJpbGEgZXN0ZSBkZXN0aW5hdMSDIHPEgyByxINtw6JuxIMgY29uc3RhbnTEgyDDrm4gdGltcHVsIGV4ZWN1yJtpZWkgZnVuY8ibaWVpLiIsICJodW5rOmNvbnN0OnZhckAyMC0zMDo2IjogIi0gKipBY2Nlc2FyZSBjb3JlY3TEgyBhIHByb3ByaWV0xIPIm2lsb3Igb2JpZWN0dWx1aSoqOiBJbnNlcsibaWEgYXNpZ3VyxIMgY8SDIHByb3ByaWV0xIPIm2lsZSBgYm91bmRpbmdib3hgIMiZaSBpbmRleHVsIGAwYCBzdW50IGFjY2VzYXRlIGNvcmVjdCBkaW4gb2JpZWN0dWwgYG9iamVjdFswXWAsIGV2aXTDom5kIGVyb3JpIGRlIHRpcCBcInVuZGVmaW5lZFwiLlxuLSAqKkV4dHJhZ2VyZSBhIGNvb3Jkb25hdGVpIG1pbmltZSBkZSBsYXRpdHVkaW5lKio6IEFjZWFzdMSDIGxpbmllIGV4dHJhZ2UgdmFsb2FyZWEgbWluaW3EgyBhIGxhdGl0dWRpbmlpIGRpbiBgYm91bmRpbmdib3hgLCBjYXJlIGVzdGUgbmVjZXNhcsSDIHBlbnRydSBhIGRlZmluaSB6b25hIGdlb2dyYWZpY8SDLlxuLSAqKkludGVncmFyZSDDrm4gZnVuY8ibaW9uYWxpdGF0ZWEgY3VyZW50xIMqKjogTGluaWEgc2UgaW50ZWdyZWF6xIMgdciZb3Igw65uIGZ1bmPIm2lhIGV4aXN0ZW50xIMsIGNvbXBsZXTDom5kIGRhdGVsZSBuZWNlc2FyZSBwZW50cnUgY2FsY3VsdWwgc2F1IGFmaciZYXJlYSB6b25laSBnZW9ncmFmaWNlLiIsICJodW5rOmNvbnN0OnZhckAyMC0zMDo3IjogIi0gKipBY2Nlc2FyZSBjb29yZG9uYXTEgyoqOiBBZGF1Z8SDIGFjY2VzYXJlYSBjb29yZG9uYXRlaSBkZSBsYXRpdHVkaW5lIG1heGltxIMgZGluIG9iaWVjdHVsIGN1cmVudC5cbi0gKipVdGlsaXphcmUgYm91bmRpbmdib3gqKjogRm9sb3NlyJl0ZSBwcm9wcmlldGF0ZWEgYGJvdW5kaW5nYm94YCBwZW50cnUgYSBvYsibaW5lIGNvb3Jkb25hdGVsZSBnZW9ncmFmaWNlLlxuLSAqKkluZGV4YXJlIGFycmF5Kio6IEluZGV4ZWF6xIMgYXJyYXktdWwgYGJvdW5kaW5nYm94YCBwZW50cnUgYSBleHRyYWdlIGxhdGl0dWRpbmVhIG1heGltxIMuXG4tICoqQXRyaWJ1aXJlIHZhbG9hcmUqKjogQXRyaWJ1aWUgdmFsb2FyZWEgb2LIm2ludXTEgyBwcm9wcmlldMSDyJtpaSBgbWF4TGF0aXR1ZGVgIGRpbiBvYmllY3R1bCBjdXJlbnQuIiwgImh1bms6Y29uc3Q6dmFyQDIwLTMwOjgiOiAiLSAqKkFjY2VzYXJlIGNvcmVjdMSDIGEgY29vcmRvbmF0ZWxvcioqOiBJbnNlcsibaWEgYXNpZ3VyxIMgYWNjZXN1bCBsYSBjb29yZG9uYXRhIG1pbmltxIMgZGUgbG9uZ2l0dWRpbmUgZGluIG9iaWVjdHVsIGN1cmVudCwgbmVjZXNhcsSDIHBlbnRydSBkZWZpbmlyZWEgdW5laSB6b25lIGdlb2dyYWZpY2UuXG4tICoqVXRpbGl6YXJlIMOubiBjb250ZXh0dWwgZnVuY8ibaWVpKio6IEFjZWFzdMSDIGluc2VyyJtpZSBlc3RlIHNwZWNpZmljxIMgcGVudHJ1IGZ1bmPIm2lhIGN1cmVudMSDIMiZaSBjb250cmlidWllIGxhIGNhbGN1bHVsIHNhdSByZXByZXplbnRhcmVhIGNvcmVjdMSDIGEgdW5laSB6b25lIGdlb2dyYWZpY2UuXG4tICoqRXZpdGFyZWEgZXJvcmlsb3IqKjogRsSDcsSDIGFjZWFzdMSDIGluc2VyyJtpZSwgZnVuY8ibaWEgYXIgcHV0ZWEgYWNjZXNhIG8gY29vcmRvbmF0xIMgZ3JlyJlpdMSDIHNhdSBhciBwdXRlYSBwcm9kdWNlIG8gZXJvYXJlLCBhZmVjdMOibmQgcmV6dWx0YXR1bCBmaW5hbC4iLCAiaHVuazpjb25zdDp2YXJAMjAtMzA6OSI6ICItICoqQWNjZXNhcmUgY29yZWN0xIMgYSBjb29yZG9uYXRlaSoqOiBJbnNlcsibaWEgYG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdYCBwZXJtaXRlIGFjY2VzYXJlYSBjb3JlY3TEgyBhIGNvb3Jkb25hdGVpIGRlIGxvbmdpdHVkaW5lIG1heGltxIMgZGludHItdW4gb2JpZWN0IGdlb2dyYWZpYywgdXRpbGl6w6JuZCBwcm9wcmlldMSDyJtpbGUgYGJvdW5kaW5nYm94YCBhbGUgYWNlc3R1aWEuXG4tICoqVXRpbGl6YXJlIGEgcHJvcHJpZXTEg8ibaWxvciBvYmllY3R1bHVpKio6IEFjZWFzdMSDIGxpbmllIGRlbW9uc3RyZWF6xIMgY3VtIHNlIHBvdCBhY2Nlc2EgyJlpIHV0aWxpemEgcHJvcHJpZXTEg8ibaWxlIHVudWkgb2JpZWN0IMOubiBKYXZhU2NyaXB0LCDDrm4gYWNlc3QgY2F6LCBwZW50cnUgYSBleHRyYWdlIGNvb3Jkb25hdGVsZSBnZW9ncmFmaWNlLlxuLSAqKkNvbnRleHR1bCBnZW9ncmFmaWMqKjogw45uIGNhZHJ1bCB1bnVpIGNvbnRleHQgZ2VvZ3JhZmljLCBhY2Vhc3TEgyBpbnNlcsibaWUgZXN0ZSBlc2VuyJtpYWzEgyBwZW50cnUgYSBkZWZpbmkgbGltaXRlbGUgZGUgbG9uZ2l0dWRpbmUgYWxlIHVudWkgb2JpZWN0LCBmaWluZCB1dGlsxIMgw65uIGFwbGljYcibaWkgZGUgY2FydG9ncmFmaWUgc2F1IGRlIGxvY2FsaXphcmUuIiwgImh1bms6Y29uc3Q6dmFyQDIwLTMwOjExIjogIi0gKipBZGF1Z8SDIG8gdmFyaWFiaWzEgyBjb25zdGFudMSDKiogw65uIGZ1bmPIm2llLCBjYXJlIHBvYXRlIGZpIHV0aWxpemF0xIMgcGVudHJ1IGEgc3RvY2EgbyB2YWxvYXJlIGNhcmUgbnUgc2UgdmEgc2NoaW1iYSDDrm4gdGltcHVsIGV4ZWN1yJtpZWkgZnVuY8ibaWVpLlxuLSAqKsOObWJ1bsSDdMSDyJtlyJl0ZSBjaXRpYmlsaXRhdGVhIGNvZHVsdWkqKiBwcmluIHNwZWNpZmljYXJlYSBleHBsaWNpdMSDIGEgdmFyaWFiaWxlbG9yIGNhcmUgc3VudCBjb25zdGFudGUuXG4tICoqUHJldmluZSBlcm9yaSBkZSBwcm9ncmFtYXJlKiogcHJpbiBhc2lndXJhcmVhIGPEgyB2YXJpYWJpbGEgbnUgdmEgZmkgbW9kaWZpY2F0xIMgYWNjaWRlbnRhbC5cbi0gKipPcHRpbWl6ZWF6xIMgcGVyZm9ybWFuyJthKiogcHJpbiB1dGlsaXphcmVhIHZhcmlhYmlsZWxvciBjb25zdGFudGUsIGNhcmUgcG90IGZpIG9wdGltaXphdGUgZGUgbW90b3J1bCBKYXZhU2NyaXB0LiIsICJodW5rOmZ1bmM6bWFpbkAzNC00MDoyIjogIi0gKipEZWZpbmlyZWEgZnVuY8ibaWVpKio6IEFjZWFzdMSDIGluc2VyyJtpZSBkZWZpbmXImXRlIG8gZnVuY8ibaWUgbnVtaXTEgyBgbWFpbmAsIGNhcmUgcG9hdGUgZmkgYXBlbGF0xIMgdWx0ZXJpb3Igw65uIGNvZC5cbi0gKipQdW5jdCBkZSBpbnRyYXJlKio6IEZ1bmPIm2lhIGBtYWluYCBzZXJ2ZciZdGUgYWRlc2VhIGNhIHB1bmN0IGRlIGludHJhcmUgcGVudHJ1IHVuIHByb2dyYW0sIGZpaW5kIHByaW1hIGZ1bmPIm2llIGFwZWxhdMSDIGxhIHJ1bGFyZS5cbi0gKipFbmNhcHN1bGFyZSoqOiBBY2Vhc3RhIHBlcm1pdGUgZ3J1cGFyZWEgY29kdWx1aSDDrm50ci1vIGZ1bmPIm2llLCBmYWNpbGl0w6JuZCBvcmdhbml6YXJlYSDImWkgcmV1dGlsaXphcmVhIGFjZXN0dWlhLlxuLSAqKlBhcmFtZXRyaSDImWkgcmV0dXJuKio6IEZ1bmPIm2lhIHBvYXRlIGZpIGV4dGluc8SDIHBlbnRydSBhIHByaW1pIHBhcmFtZXRyaSDImWkgYSByZXR1cm5hIHZhbG9yaSwgY29uZm9ybSBuZWNlc2l0xIPIm2lsb3IgcHJvZ3JhbXVsdWkuIiwgImh1bms6ZnVuYzptYWluQDM0LTQwOjQiOiAiLSAqKkFjY2VzYXJlIGRhdGUgZ2VvZ3JhZmljZSoqOiBJbnNlcsibaWEgYWRhdWfEgyBmdW5jyJtpb25hbGl0YXRlYSBkZSBhIG9iyJtpbmUgY29vcmRvbmF0ZWxlIGdlb2dyYWZpY2UgYWxlIFJvbcOibmllaSwgcGVybWnIm8OibmQgdXRpbGl6YXJlYSBhY2VzdG9yIGRhdGUgw65uIGFsdGUgcMSDcsibaSBhbGUgYXBsaWNhyJtpZWkuXG4tICoqUGVyc29uYWxpemFyZSoqOiBQZXJtaXRlIHV0aWxpemF0b3JpbG9yIHPEgyBpbnRlcmFjyJtpb25lemUgY3UgZGF0ZSBzcGVjaWZpY2UgUm9tw6JuaWVpLCBmxINjw6JuZCBhcGxpY2HIm2lhIG1haSBwZXJzb25hbGl6YXTEgyDImWkgcmVsZXZhbnTEgyBwZW50cnUgdXRpbGl6YXRvcmlpIGRpbiBhY2Vhc3TEgyDIm2FyxIMuXG4tICoqSW50ZWdyYXJlIGN1IGjEg3LIm2kqKjogUG9hdGUgZmkgdXRpbGl6YXTEgyBwZW50cnUgYSBhZmnImWEgaMSDcsibaSBzYXUgem9uZSBnZW9ncmFmaWNlIHNwZWNpZmljZSBSb23Dom5pZWksIMOubWJ1bsSDdMSDyJtpbmQgdml6dWFsaXphcmVhIGRhdGVsb3Igc3BhyJtpYWxlLiIsICJodW5rOmZ1bmM6bWFpbkAzNC00MDo1IjogIi0gKipBZGF1Z8SDIHVuIGNhbGxiYWNrKiogcGVudHJ1IGEgYWZpyJlhIHJlenVsdGF0dWwgcHJvbWlzaXVuaWkgw65uIGNvbnNvbMSDLlxuLSAqKlNpbXBsaWZpY8SDIGNvZHVsKiogcHJpbiBlbGltaW5hcmVhIHVuZWkgZnVuY8ibaWkgc2VwYXJhdGUgcGVudHJ1IHRyYXRhcmVhIHJlenVsdGF0dWx1aS5cbi0gKirDjm1idW7Eg3TEg8ibZciZdGUgY2l0aWJpbGl0YXRlYSoqIHByaW4gw65ubMSDbsibdWlyZWEgZGlyZWN0xIMgYSBwcm9taXNpdW5pbG9yLlxuLSAqKlJlZHVjZXJlYSB2ZXJib3NpdMSDyJtpaSoqIHByaW4gZWxpbWluYXJlYSB1bmVpIGZ1bmPIm2lpIHN1cGxpbWVudGFyZS4iLCAiaHVuazpmdW5jOm1haW5AMzQtNDA6NyI6ICItICoqw45uY2hpZGUgZnVuY8ibaWEqKjogQWNlc3QgZnJhZ21lbnQgw65uY2hpZGUgY29ycHVsIGZ1bmPIm2llaSBgbWFpbmAsIG1hcmPDom5kIHNmw6JyyJlpdHVsIGJsb2N1bHVpIGRlIGNvZCBhc29jaWF0IGFjZXN0ZWlhLlxuLSAqKlBlcm1pdGUgZXhlY3XIm2lhKio6IEbEg3LEgyBhY2Vhc3TEgyDDrm5jaGlkZXJlLCBjb2R1bCBkaW4gaW50ZXJpb3J1bCBmdW5jyJtpZWkgbnUgYXIgcHV0ZWEgZmkgZXhlY3V0YXQgY29yZWN0LlxuLSAqKlNpbnRheMSDIGNvcmVjdMSDKio6IEVzdGUgbyBwYXJ0ZSBlc2VuyJtpYWzEgyBhIHN0cnVjdHVyaWkgc2ludGFjdGljZSBhIHVuZWkgZnVuY8ibaWkgw65uIEphdmFTY3JpcHQsIGFzaWd1csOibmQgY8SDIGNvZHVsIGVzdGUgc2NyaXMgY29uZm9ybSByZWd1bGlsb3IgbGltYmFqdWx1aS4ifX0sICJhdXRvX25vdGVzIjogeyJpbXBvcnQ6aW1wb3J0QDYtNyI6ICItIEZ1bmPIm2llICoqaW1wb3J0KiogWzbigJM3XVxuLSBIZXVyaXN0aWPEgzogcGFyZSAqKnB1csSDKiogKGbEg3LEgyBlZmVjdGUgdml6aWJpbGUpIiwgImNvbnN0OnZhckA2LTciOiAiLSBGdW5jyJtpZSAqKnZhcioqIFs24oCTN11cbi0gSGV1cmlzdGljxIM6IHBhcmUgKipwdXLEgyoqIChmxINyxIMgZWZlY3RlIHZpemliaWxlKSIsICJjb25zdDp2YXJAMTAtMTEiOiAiLSBGdW5jyJtpZSAqKnZhcioqIFsxMOKAkzExXVxuLSBFZmVjdGU6IGNlcmVyaSBIVFRQLCBhd2FpdC9hc2luY3JvbiIsICJjb25zdDp2YXJAMTItMTMiOiAiLSBGdW5jyJtpZSAqKnZhcioqIFsxMuKAkzEzXVxuLSBFZmVjdGU6IGF3YWl0L2FzaW5jcm9uIiwgImNvbnN0OnZhckAyMC0zMCI6ICItIEZ1bmPIm2llICoqdmFyKiogWzIw4oCTMzBdXG4tIENvbsibaW5lIDEgYHJldHVybmBcbi0gRWZlY3RlOiBhd2FpdC9hc2luY3JvbiIsICJmdW5jOm1haW5AMzQtNDAiOiAiLSBGdW5jyJtpZSAqKm1haW4qKiBbMzTigJM0MF1cbi0gRWZlY3RlOiBsb2dhcmUvZGlhZ25vc3RpY2FyZSJ9LCAibWljcm9fYXV0byI6IHsiaHVuazppbXBvcnQ6aW1wb3J0QDYtNzoxIjogIi0gQ29tcGxldGFyZSBpbmNyZW1lbnRhbMSDOiAiLCAiaHVuazpjb25zdDp2YXJAMTAtMTE6MSI6ICItIENvbXBsZXRhcmUgaW5jcmVtZW50YWzEgzogIiwgImh1bms6Y29uc3Q6dmFyQDEyLTEzOjEiOiAiLSBDb21wbGV0YXJlIGluY3JlbWVudGFsxIM6ICIsICJodW5rOmNvbnN0OnZhckAyMC0zMDoxIjogIi0gQ29tcGxldGFyZSBpbmNyZW1lbnRhbMSDOiAiLCAiaHVuazppbXBvcnQ6aW1wb3J0QDYtNzoyIjogIi0gSW50cm9kdWNlbSB2YXJpYWJpbGEgKipmZXRjaCoqIOKGkCByZXF1aXJlKCdub2RlLWZldGNoJyk7IiwgImh1bms6Y29uc3Q6dmFyQDEwLTExOjIiOiAiLSBJbnRyb2R1Y2VtIHZhcmlhYmlsYSAqKnJlc3BvbnNlKiog4oaQIGF3YWl0IGZldGNoKHVybCk7XG4tIE9wZXLEg20gKiphc2luY3JvbioqIChgYXN5bmMvYXdhaXRgIHNhdSBgUHJvbWlzZWApLlxuLSBBZMSDdWfEg20gbyAqKmNlcmVyZSBIVFRQKiogY3UgYGZldGNoKC4uLilgLiIsICJodW5rOmNvbnN0OnZhckAxMi0xMzoyIjogIi0gSW50cm9kdWNlbSB2YXJpYWJpbGEgKip0ZXh0Kiog4oaQIGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbi0gT3BlcsSDbSAqKmFzaW5jcm9uKiogKGBhc3luYy9hd2FpdGAgc2F1IGBQcm9taXNlYCkuIiwgImh1bms6Y29uc3Q6dmFyQDIwLTMwOjIiOiAiLSBJbnRyb2R1Y2VtIHZhcmlhYmlsYSAqKm9iamVjdCoqIOKGkCBhd2FpdCBnZXRPYmplY3RGcm9tVXJsKGBodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy/igKZcbi0gT3BlcsSDbSAqKmFzaW5jcm9uKiogKGBhc3luYy9hd2FpdGAgc2F1IGBQcm9taXNlYCkuIiwgImh1bms6Y29uc3Q6dmFyQDIwLTMwOjMiOiAiLSBDb21wbGV0YXJlIGluY3JlbWVudGFsxIM6ICIsICJodW5rOmNvbnN0OnZhckAyMC0zMDo0IjogIi0gU3RhYmlsaW0gdmFsb2FyZWEgZGUgw65udG9hcmNlcmU6IGB7YCIsICJodW5rOmNvbnN0OnZhckAyMC0zMDo1IjogIi0gQ29tcGxldGFyZSBpbmNyZW1lbnRhbMSDOiAiLCAiaHVuazpjb25zdDp2YXJAMjAtMzA6NiI6ICItIENvbXBsZXRhcmUgaW5jcmVtZW50YWzEgzogbWluTGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFswXSwiLCAiaHVuazpjb25zdDp2YXJAMjAtMzA6NyI6ICItIENvbXBsZXRhcmUgaW5jcmVtZW50YWzEgzogbWF4TGF0aXR1ZGU6IG9iamVjdFswXS5ib3VuZGluZ2JveFsxXSwiLCAiaHVuazpjb25zdDp2YXJAMjAtMzA6OCI6ICItIENvbXBsZXRhcmUgaW5jcmVtZW50YWzEgzogbWluTG9uZ2l0dWRlOiBvYmplY3RbMF0uYm91bmRpbmdib3hbMl0sIiwgImh1bms6Y29uc3Q6dmFyQDIwLTMwOjkiOiAiLSBDb21wbGV0YXJlIGluY3JlbWVudGFsxIM6IG1heExvbmdpdHVkZTogb2JqZWN0WzBdLmJvdW5kaW5nYm94WzNdIiwgImh1bms6Y29uc3Q6dmFyQDIwLTMwOjEwIjogIi0gQ29tcGxldGFyZSBpbmNyZW1lbnRhbMSDOiAiLCAiaHVuazpjb25zdDp2YXJAMjAtMzA6MTEiOiAiLSBDb21wbGV0YXJlIGluY3JlbWVudGFsxIM6IH0iLCAiaHVuazpmdW5jOm1haW5AMzQtNDA6MSI6ICItIENvbXBsZXRhcmUgaW5jcmVtZW50YWzEgzogIiwgImh1bms6ZnVuYzptYWluQDM0LTQwOjIiOiAiLSBEZWNsYXLEg20gZnVuY8ibaWEgKiptYWluKiogY3UgcGFyYW1ldHJpaTog4oiFIiwgImh1bms6ZnVuYzptYWluQDM0LTQwOjMiOiAiLSBDb21wbGV0YXJlIGluY3JlbWVudGFsxIM6ICIsICJodW5rOmZ1bmM6bWFpbkAzNC00MDo0IjogIi0gQ29tcGxldGFyZSBpbmNyZW1lbnRhbMSDOiBnZXRDb3VudHJ5Qm91bmRzKCdSb21hbmlhJykiLCAiaHVuazpmdW5jOm1haW5AMzQtNDA6NSI6ICItIEluc2VyxINtICoqbG9nYXJlKiogKGRpYWdub3N0aWMpIGN1IGBjb25zb2xlLipgLiIsICJodW5rOmZ1bmM6bWFpbkAzNC00MDo2IjogIi0gQ29tcGxldGFyZSBpbmNyZW1lbnRhbMSDOiAiLCAiaHVuazpmdW5jOm1haW5AMzQtNDA6NyI6ICItIENvbXBsZXRhcmUgaW5jcmVtZW50YWzEgzogfSJ9fQ==</script>

<script>
function b64ToUtf8(b64){
  const bin = atob(b64.trim());
  const bytes = new Uint8Array(bin.length);
  for (let i=0;i<bin.length;i++) bytes[i] = bin.charCodeAt(i);
  return new TextDecoder('utf-8').decode(bytes);
}
const text = b64ToUtf8(document.getElementById('payload_b64').textContent);
const data = JSON.parse(text);
const FNAME = 'S4v6partB_country_bounds.js';

let frames=data.frames, patches=data.patches, steps=data.steps, style=data.style;
let llmBlock = (data.llm && data.llm.notes) ? data.llm.notes : {};
let llmMicro = (data.llm && data.llm.micro) ? data.llm.micro : {};
let autoBlock = data.auto_notes || {};
let autoMicro = data.micro_auto || {};

let cps=0.02, playing=false, frameIdx=0, hunkIdx=0, cursor=0;
let uTok=0, uChar=0;   // acumulatoare reale
let cooldown=0;
let lines=[]; let tokMap={}; let focusStart=1, focusEnd=0, scrollTarget=null;
let curBlkId="", curHId="";
const codebox=document.getElementById('codebox'), meta=document.getElementById('meta'),
      title=document.getElementById('title'), rat=document.getElementById('rat'),
      prog=document.getElementById('prog'), speed=document.getElementById('speed'),
      speedv=document.getElementById('speedv'), gran=document.getElementById('gran'),
      keyBlock=document.getElementById('keyBlock'), keyMicro=document.getElementById('keyMicro'),
      noteBlock=document.getElementById('noteBlock'), noteMicro=document.getElementById('noteMicro'),
      srcBlockAuto=document.getElementById('srcBlockAuto'), srcBlockLLM=document.getElementById('srcBlockLLM'),
      srcMicroAuto=document.getElementById('srcMicroAuto'), srcMicroLLM=document.getElementById('srcMicroLLM'),
      lockAll=document.getElementById('lockAll'), hold=document.getElementById('hold'), holdV=document.getElementById('holdV'),
      toggleDim=document.getElementById('toggleDim'), asciiFallback=document.getElementById('asciiFallback');

(function(){ const w = localStorage.getItem('notesW'); if(w){ document.documentElement.style.setProperty('--notesW', w); } })();
(function(){
  const sp = document.getElementById('splitter'); let drag=false;
  function onMove(e){ if(!drag) return; const wrap=document.querySelector('.wrap').getBoundingClientRect();
    const x=(e.touches&&e.touches[0])?e.touches[0].clientX:e.clientX; let newW=Math.round(wrap.right-x);
    newW=Math.max(360,Math.min(900,newW)); document.documentElement.style.setProperty('--notesW',newW+'px'); }
  function stop(){ if(!drag) return; drag=false; const w=getComputedStyle(document.documentElement).getPropertyValue('--notesW').trim();
    try{ localStorage.setItem('notesW',w);}catch(_){}
    document.removeEventListener('mousemove',onMove); document.removeEventListener('touchmove',onMove);
    document.removeEventListener('mouseup',stop); document.removeEventListener('touchend',stop); }
  function start(e){ e.preventDefault(); drag=true; document.addEventListener('mousemove',onMove);
    document.addEventListener('touchmove',onMove,{passive:false}); document.addEventListener('mouseup',stop); document.addEventListener('touchend',stop); }
  sp.addEventListener('mousedown',start); sp.addEventListener('touchstart',start,{passive:false});
  sp.addEventListener('dblclick',()=>{ const cur=parseInt(getComputedStyle(document.documentElement).getPropertyValue('--notesW'));
    const target=(cur<600?760:520); document.documentElement.style.setProperty('--notesW',target+'px'); localStorage.setItem('notesW',target+'px'); });
})();

let dimOn=true; toggleDim.onchange=()=>{ dimOn=toggleDim.checked; render(); };
let holdSec=parseFloat(hold.value); hold.oninput=()=>{ holdSec=parseFloat(hold.value); holdV.textContent=holdSec.toFixed(1)+"s"; };

srcBlockLLM.checked = Object.keys(llmBlock).length>0; srcBlockAuto.checked = !srcBlockLLM.checked;
srcMicroLLM.checked = Object.keys(llmMicro).length>0; srcMicroAuto.checked = !srcMicroLLM.checked;

function _ascii(s){
  try { return s.normalize('NFD').replace(/\p{Diacritic}/gu,''); } catch(_){ return s; }
}
function _renderNote(targetEl, text){
  targetEl.innerHTML = asciiFallback.checked ? _ascii(text) : text;
}

function mapBlock(){ return (srcBlockLLM.checked && Object.keys(llmBlock).length>0) ? llmBlock : autoBlock; }
function mapMicro(){ return (srcMicroLLM.checked && Object.keys(llmMicro).length>0) ? llmMicro : autoMicro; }
asciiFallback.onchange = ()=>{ if(curBlkId){ showBlock(curBlkId, true); } if(curHId){ showMicro(curHId, true); } };
srcBlockAuto.onchange = srcBlockLLM.onchange = ()=>{ if(curBlkId){ showBlock(curBlkId, true); } };
srcMicroAuto.onchange = srcMicroLLM.onchange = ()=>{ if(curHId){ showMicro(curHId, true); } };

function esc(s){ s = (s==null ? '' : String(s)); return s.replace(/[&<>]/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c])); }
function render(){
  let html="";
  for(let i=0;i<lines.length;i++){
    const ln=i+1, dim = dimOn && (focusEnd>=focusStart) && (ln<focusStart || ln>focusEnd);
    const cls = dim? 'line dim':'line';
    const t = tokMap[i];
    const L = (lines[i]==null ? '' : String(lines[i]));
    if(t){
      const s=Math.max(0,Math.min(L.length,t.s));
      const e=Math.max(s,Math.min(L.length,t.e));
      html += `<div class="${cls}" data-idx="${i}">${esc(L.slice(0,s))}<span class="tok">${esc(L.slice(s,e))}</span>${esc(L.slice(e))}</div>`;
    } else {
      html += `<div class="${cls}" data-idx="${i}">${esc(L)}</div>`;
    }
  }
  codebox.innerHTML = html;
  if(scrollTarget !== null){
    const el = codebox.querySelector(`.line[data-idx="${scrollTarget-1}"]`);
    if(el){ el.scrollIntoView({block:'center'}); }
    scrollTarget = null;
  }
  prog.style.width = ((frameIdx)/(frames.length-1)*100).toFixed(1)+"%";
}

function updateMeta(){
  meta.textContent = `Stil detectat: ${style} · Pași: ${steps.length}`;
  const sIdx=Math.min(frameIdx, Math.max(0,steps.length-1));
  if(steps[sIdx]){ title.textContent = `${sIdx+1}/${steps.length} — ${steps[sIdx].title}`; rat.textContent = steps[sIdx].rationale; }
  document.title = `${sIdx+1}/${steps.length} — ${FNAME}`;
  const s = (cps < 1 ? cps.toFixed(2) : cps.toFixed(1));
  speedv.textContent = s + (gran.value==='token' ? " tps" : " cps");
}

function resetFrame(i){
  frameIdx=i; hunkIdx=0; cursor=0; cooldown=0; tokMap={}; uTok=0; uChar=0; focusStart=1; focusEnd=0; scrollTarget=null;
  lines = (frames[i] ? frames[i].split('\n') : []);
  if(lines.length && lines[lines.length-1]==="") lines.pop();
  render(); updateMeta();
}
function applyDelete(s,e){ lines.splice(s,e-s); }

function isWS(ch){ return ch===' ' || ch==='\t' || ch==='\r' || ch==='\n'; }
function tokeniseJS(src){
  const toks=[]; const n=src.length; let i=0;
  const push=(s,e,end)=>toks.push({tStart:s,tEnd:e,end:end});
  while(i<n){
    if(isWS(src[i])){ let j=i; while(j<n && isWS(src[j])) j++; if(toks.length) toks[toks.length-1].end = j; i=j; continue; }
    if(src[i]=='/' && i+1<n){
      if(src[i+1]=='/'){ let j=i+2; while(j<n && src[j] !== '\n') j++; let endTok=(j<n && src[j]=='\n')?j+1:j; push(i,j,endTok); i=endTok; continue; }
      if(src[i+1]=='*'){ let j=i+2; while(j<n && !(src[j]=='*' && j+1<n && src[j+1]=='/')) j++; j=Math.min(n,j+2); push(i,j,j); i=j; continue; }
    }
    if(src[i]=="'" || src[i]=='"' || src[i]=='`'){
      const q=src[i]; let j=i+1; const tpl=(q=='`'); let depth=0;
      while(j<n){
        const ch=src[j];
        if(ch=='\\'){ j+=2; continue; }
        if(tpl && ch=='$' && j+1<n && src[j+1]=='{'){
          j+=2; depth=1;
          while(j<n && depth>0){
            const c2=src[j];
            if(c2=='\\'){ j+=2; continue; }
            if(c2=='{') depth++; else if(c2=='}') depth--; j++;
          }
          continue;
        }
        if(ch==q){ j++; break; }
        j++;
      }
      let k=j; while(k<n && isWS(src[k])) k++;
      push(i,j,k); i=k; continue;
    }
    let m;
    if(m = src.slice(i).match(/^(0x[0-9A-Fa-f]+|0b[01]+|0o[0-7]+|(?:\d*\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?)/)){
      let j=i+m[0].length; let k=j; while(k<n && isWS(src[k])) k++; push(i,j,k); i=k; continue;
    }
    if(m = src.slice(i).match(/^[$A-Za-z_][$\w]*/)){
      let j=i+m[0].length; if(j<n && src[j]=='('){ j++; } let k=j; while(k<n && isWS(src[k])) k++; push(i,j,k); i=k; continue;
    }
    if(m = src.slice(i).match(/^(===|!==|>>>=|>>>|>>=|<<=|\+\+|--|=>|<=|>=|&&|\|\||\.\.\.|[+\-*/%&|^]=|[=!<>]=)/)){
      let j=i+m[0].length; let k=j; while(k<n && isWS(src[k])) k++; push(i,j,k); i=k; continue;
    }
    if(m = src.slice(i).match(/^([{}()[\],.;:?])/)){
      let j=i+m[0].length; let k=j; while(k<n && isWS(src[k])) k++; push(i,j,k); i=k; continue;
    }
    let j=i+1; let k=j; while(k<n && isWS(src[k])) k++; push(i,j,k); i=k;
  }
  return toks;
}

function showBlock(key, force=false){ const m = (srcBlockLLM.checked && Object.keys(llmBlock).length>0) ? llmBlock : autoBlock; if(!m[key]) return; curBlkId=key; keyBlock.textContent = "Bloc: " + key; _renderNote(noteBlock, m[key]); }
function showMicro(key, force=false){ const m = (srcMicroLLM.checked && Object.keys(llmMicro).length>0) ? llmMicro : autoMicro; if(!m[key]) return; curHId = key; keyMicro.textContent = "Etapă: " + key; _renderNote(noteMicro, m[key]); }

let lastBlockTs=0;
function maybeShowNotes(h){
  if(lockAll.checked) return;
  const blkKey = h.blkId || `${h.kind||'func'}:${h.name||''}@${h.focusStart||0}-${h.focusEnd||0}`;
  const hKey   = h.hId || "";
  const mapB = (srcBlockLLM.checked && Object.keys(llmBlock).length>0) ? llmBlock : autoBlock;
  const mapM = (srcMicroLLM.checked && Object.keys(llmMicro).length>0) ? llmMicro : autoMicro;
  if(!curBlkId || curBlkId.split('@')[0] !== blkKey.split('@')[0]){ if(mapB[blkKey]){ showBlock(blkKey, true); } lastBlockTs = performance.now();
  }else{ const now=performance.now(); if(now - lastBlockTs >= holdSec*1000){ if(mapB[blkKey]){ showBlock(blkKey); lastBlockTs=now; } } }
  if(hKey && mapM[hKey]){ showMicro(hKey, true); }
}

function tick(dt){
  if(!playing) return;
  if(cooldown>0){ cooldown=Math.max(0,cooldown-dt); return; }
  if(frameIdx >= patches.length){ playing=false; btnPlay.textContent="▶︎ Play"; return; }
  const step=patches[frameIdx]||[];
  if(step.length===0){ nextUnit(); return; }
  if(hunkIdx >= step.length){ nextUnit(); return; }
  const h=step[hunkIdx]; if(!h){ nextUnit(); return; }
  if(h.op==='delete'){ applyDelete(h.start,h.end); tokMap={}; render(); nextUnit(); return; }

  if(h.op==='insert'){
    if(cursor===0){
      const N=h.text.split('\n').length; lines.splice(h.start,0,...Array(N).fill(""));
      if(h.focusStart && h.focusEnd){ focusStart=h.focusStart; focusEnd=h.focusEnd; }
      if(h.scrollLine){ scrollTarget=h.scrollLine; }
      maybeShowNotes(h);
      if(!h._chunks) h._chunks = tokeniseJS(h.text);
      h._tokIdx = 0;
    }
    if(gran.value==='token'){
      uTok += cps*dt;
      let advanced=false;
      while(uTok>=1 && h._tokIdx < h._chunks.length){
        const t = h._chunks[h._tokIdx];
        const end = t.end;
        const full = h.text.slice(0,end).split('\n');
        const N = h.text.split('\n').length;
        for(let i=0;i<N;i++){ lines[h.start+i] = (i<full.length ? full[i] : ""); }
        tokMap={};
        const linesBefore=h.text.slice(0,t.tStart).split('\n');
        let baseLine=h.start+(linesBefore.length-1), baseCol=linesBefore[linesBefore.length-1].length;
        let lenTok = t.tEnd - t.tStart;
        tokMap[baseLine] = {s:baseCol, e:baseCol+lenTok};
        cursor = end;
        h._tokIdx++; uTok -= 1; advanced=true;
      }
      render();
      if(h._tokIdx >= h._chunks.length){ nextUnit(); }
      else if(!advanced){ return; }
      return;
    } else {
      uChar += cps*dt;
      const stepAmt = Math.floor(uChar);
      if(stepAmt <= 0){ return; }
      uChar -= stepAmt;
      const end = Math.min(h.text.length, cursor + stepAmt);
      const full = h.text.slice(0,end).split('\n');
      const N = h.text.split('\n').length;
      for(let i=0;i<N;i++){ lines[h.start+i] = (i<full.length ? full[i] : ""); }
      tokMap={};
      const already=h.text.slice(0,cursor), delta=h.text.slice(cursor,end);
      const linesBefore=already.split('\n');
      let baseLine=h.start+(linesBefore.length-1), baseCol=linesBefore[linesBefore.length-1].length;
      tokMap[baseLine] = {s:baseCol, e:baseCol+delta.length};
      cursor=end; render();
      if(cursor>=h.text.length){ nextUnit(); }
      return;
    }
  }
}

function nextUnit(){ cooldown=0.20;
  const step=patches[frameIdx]||[];
  if(hunkIdx < step.length-1){ hunkIdx++; cursor=0; tokMap={}; uTok=0; uChar=0; return true; }
  if(hunkIdx < step.length){ hunkIdx++; cursor=0; tokMap={}; uTok=0; uChar=0; }
  if(frameIdx < frames.length-1){
    frameIdx++; hunkIdx=0; cursor=0; tokMap={}; uTok=0; uChar=0;
    while(frameIdx < patches.length && (!patches[frameIdx] || patches[frameIdx].length===0)){ frameIdx++; }
    if(frameIdx >= frames.length){ frameIdx=frames.length-1; render(); updateMeta(); return false; }
    lines = (frames[frameIdx] ? frames[frameIdx].split('\n') : []);
    if(lines.length && lines[lines.length-1]==="") lines.pop();
    render(); updateMeta(); return true;
  } return false;
}

let lastTs=null; function raf(ts){ if(lastTs===null) lastTs=ts; const dt=Math.max(0,(ts-lastTs)/1000.0); lastTs=ts; tick(dt); requestAnimationFrame(raf);} requestAnimationFrame(raf);
const btnPlay=document.getElementById('btnPlay'), btnPrev=document.getElementById('btnPrev'), btnNext=document.getElementById('btnNext');
btnPlay.onclick=()=>{ playing=!playing; btnPlay.textContent=playing?"❚❚ Pause":"▶︎ Play"; if(playing){ while(frameIdx < patches.length && (!patches[frameIdx] || patches[frameIdx].length===0)){ frameIdx++; } } };
btnPrev.onclick=()=>{ playing=false; btnPlay.textContent="▶︎ Play"; resetFrame(Math.max(0,frameIdx-1)); };
btnNext.onclick=()=>{ playing=false; btnPlay.textContent="▶︎ Play"; resetFrame(Math.min(frames.length-1,frameIdx+1)); };

function updateSpeedLabel(){
  const s = (cps < 1 ? cps.toFixed(2) : cps.toFixed(1));
  speedv.textContent = s + (gran.value==='token' ? ' tps' : ' cps');
}
speed.oninput=e=>{ cps=parseFloat(speed.value); updateSpeedLabel(); };
gran.onchange=e=>{
  if(gran.value==='token'){ speed.min='0.01'; speed.max='5';  speed.step='0.01'; if(cps<0.01||cps>5){ cps=0.02; speed.value='0.02'; } }
  else                    { speed.min='0.5';  speed.max='60'; speed.step='0.5';  if(cps<0.5){ cps=5;    speed.value='5';    } }
  updateSpeedLabel();
};
resetFrame(0);
</script>
</body></html>